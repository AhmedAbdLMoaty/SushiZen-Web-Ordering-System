<div class="kitchen-container">
  <div class="page-header">
    <div class="header-content">
      <h1>Kitchen Orders</h1>
      <p>Manage and update order statuses</p>
    </div>
  </div>

  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading orders...</p>
  </div>

  <div *ngIf="error" class="error-message">
    <mat-icon>error_outline</mat-icon>
    <p>Sorry, we couldn't load the orders. Please try again later.</p>
    <button mat-raised-button color="primary" (click)="loadOrders()">
      Retry
    </button>
  </div>

  <div class="orders-container" *ngIf="!loading && !error">
    <div *ngIf="orders.length === 0" class="no-orders">
      <mat-icon>restaurant</mat-icon>
      <h3>No orders to prepare</h3>
      <p>You're all caught up!</p>
    </div>

    <div *ngIf="orders.length > 0" class="orders-grid">
      <mat-card
        *ngFor="let order of orders"
        class="order-card"
        [ngClass]="getStatusClass(order.status)"
      >
        <mat-card-header>
          <mat-card-title>Order #{{ order.orderId }}</mat-card-title>
          <mat-card-subtitle>
            <div class="order-meta">
              <span>{{ order.createdAt | date : "short" }}</span>
              <span
                class="status-badge"
                [ngClass]="getStatusClass(order.status)"
                >{{ order.status }}</span
              >
            </div>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <div class="order-items">
            <h4>Items:</h4>
            <ul>
              <li *ngFor="let item of order.items">
                {{ item.quantity }} x {{ item.itemName || item.itemId }}
              </li>
            </ul>
          </div>

          <div class="customer-info">
            <p>
              <strong>Customer:</strong> {{ order.userName || order.userId }}
            </p>
            <p><strong>Total:</strong> {{ order.totalPrice | currency }}</p>
          </div>
        </mat-card-content>

        <mat-card-actions align="end">
          <mat-form-field appearance="outline" class="status-select">
            <mat-label>Status</mat-label>
            <mat-select
              [(ngModel)]="order.status"
              (selectionChange)="updateOrderStatus(order.orderId, order.status)"
            >
              <mat-option *ngFor="let status of orderStatuses" [value]="status">
                {{ status }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
